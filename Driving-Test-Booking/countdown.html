<!--Code generated by ChatGPT-->
<!DOCTYPE html>
<html>
  <head>
    <title>Countdown</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta charset="utf-8">
    <link rel="icon" type="image/x-icon" href="favicon.png">
    <!--icon from: https://uxwing.com/pending-icon/-->
    <!--Free to use any personal and commercial projects without any attribution or credit, icon license: https://uxwing.com/license/-->
    <style type="text/css">
      /* Define the page styles */
      body {
        font-family: Arial, sans-serif;
        font-size: 24px;
        text-align: center;
      }

      #countdown {
        font-size: 36px;
        margin-top: 20px;
      }
    </style>
   
  </head>
  <body>
    <h1>Countdown</h1>
    <div>Time remaining:</div>
    <div id="countdown"></div>
  </body>

  <script type="text/javascript">

    const urlParams = new URLSearchParams(window.location.search);
    const isframe = urlParams.get('frame') === 'true';


    function getNextTarget() {
      // Get the current date and time
      var now = new Date();

      // Set the target time to today's date at 05:59:59
      var target = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 5, 59, 59, 0);

      // If the target time has already passed for today, set it to tomorrow's date at 05:59:59
      if (now > target) {
        target.setDate(target.getDate() + 1);
      }

      return target;
    }

    function countdown() {
      var now = new Date();
      var target = getNextTarget(); // Get the next target date and time

      var diff = target.getTime() - now.getTime(); // Calculate the time difference in milliseconds
      //console.log(diff);
      if (diff <= 100) {
        if(isframe==true){
          window.open("https://driverpracticaltest.dvsa.gov.uk/login");
        }
        else{
          window.location.href = "https://driverpracticaltest.dvsa.gov.uk/login"; // Countdown has ended, redirect to the specified URL
        //return;
        }
      }

      var hours = Math.floor(diff / (1000 * 60 * 60)); // Calculate the number of hours
      var minutes = Math.floor((diff / (1000 * 60)) % 60); // Calculate the number of minutes
      var seconds = Math.floor((diff / 1000) % 60); // Calculate the number of seconds
      var milliseconds = diff % 1000; // Calculate the number of milliseconds

      // Format the time as HH:MM:SS.SSS
      var formattedTime = ("0" + hours).slice(-2) + ":" + ("0" + minutes).slice(-2) + ":" + ("0" + seconds).slice(-2) + "." + ("00" + milliseconds).slice(-3);

      // Display the countdown on the page
      document.getElementById("countdown").textContent = formattedTime;

      setTimeout(countdown, 1); // Update the countdown every millisecond
    }

    countdown(); // Start the countdown
  </script>
</html>
